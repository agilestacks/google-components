---
version: 1
kind: component
meta:
  name: online-boutique-app
  brief: Online Boutique App
  version: 1
  source:
      dir: ../online-boutique-app/

parameters:
- name: projectId
  env: PROJECT
- name: dns.domain
  env: DOMAIN_NAME

- name: component.gke.name
  env: NAME  
- name: component.gke.zone
  empty: allow
  env: ZONE      

- name: component.onlineBoutiqueApp
  parameters: 
  - name: istioRevision
    empty: allow
    env: ISTIO_REVISION
  - name: host
  - name: ingressGateway
    empty: allow
  - name: loadgenerator
    parameters:
    - name: numberOfReplicas
      value: 3
    - name: numberOfUsers
      value: 100


templates:
  files:
  - "resources/istio-manifests/*.template"
  - "resources/kubernetes-manifests/deployments/*.template"
  - "resources/*.template"

outputs:
- name: component.onlineBoutiqueApp.host
